# Demo ç›®å½•è¯´æ˜Ž

è¿™ä¸ªç›®å½•åŒ…å«äº†å„ç§ä½¿ç”¨ glog çš„ç¤ºä¾‹ç¨‹åºã€‚æ¯ä¸ª demo éƒ½åœ¨ç‹¬ç«‹çš„å­ç›®å½•ä¸­ï¼Œé¿å… main å‡½æ•°å†²çªã€‚

## ðŸ“ ç›®å½•ç»“æž„

```
demo/
â”œâ”€â”€ README.md              # æœ¬æ–‡ä»¶
â”œâ”€â”€ DEMO_GUIDE.md         # è¯¦ç»†ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ SUMMARY.md            # æ€»ç»“æ–‡æ¡£
â”œâ”€â”€ run_demos.sh          # ä¸€é”®è¿è¡Œè„šæœ¬
â”œâ”€â”€ demo.go               # åŽŸå§‹ç®€å•ç¤ºä¾‹
â”œâ”€â”€ basic/                # åŸºç¡€åŠŸèƒ½æ¼”ç¤º
â”‚   â””â”€â”€ main.go
â”œâ”€â”€ webapp/               # Web åº”ç”¨æ¨¡æ‹Ÿ
â”‚   â””â”€â”€ main.go
â””â”€â”€ performance/          # æ€§èƒ½æµ‹è¯•
    â””â”€â”€ main.go
```

## ðŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ 1: ä½¿ç”¨è¿è¡Œè„šæœ¬ï¼ˆæŽ¨èï¼‰

```bash
# æ˜¾ç¤ºå¸®åŠ©
./demo/run_demos.sh

# è¿è¡ŒåŸºç¡€æ¼”ç¤º
./demo/run_demos.sh basic

# è¿è¡Œ Web åº”ç”¨æ¼”ç¤º
./demo/run_demos.sh webapp

# è¿è¡Œæ€§èƒ½æµ‹è¯•
./demo/run_demos.sh performance

# è¿è¡Œæ‰€æœ‰æ¼”ç¤º
./demo/run_demos.sh all
```

### æ–¹å¼ 2: ç›´æŽ¥è¿è¡Œ

```bash
# åŸºç¡€æ¼”ç¤º
go run demo/basic/main.go

# Web åº”ç”¨æ¼”ç¤º
go run demo/webapp/main.go

# æ€§èƒ½æµ‹è¯•
go run demo/performance/main.go

# åŽŸå§‹ç®€å•ç¤ºä¾‹
go run demo/demo.go
```

### æ–¹å¼ 3: ä½¿ç”¨ Makefile

```bash
# è¿è¡Œé»˜è®¤ demoï¼ˆåŸºç¡€æ¼”ç¤ºï¼‰
make demo

# æž„å»ºæ‰€æœ‰ demo å¯æ‰§è¡Œæ–‡ä»¶
make build-demo

# è¿è¡Œæž„å»ºå¥½çš„æ–‡ä»¶
./bin/basic-demo
./bin/webapp-demo
./bin/performance-demo
```

## ðŸ“š Demo è¯¦ç»†è¯´æ˜Ž

### 1. demo/basic/ - åŸºç¡€åŠŸèƒ½æ¼”ç¤º

**åŒ…å« 8 ä¸ªæ ¸å¿ƒåœºæ™¯ï¼š**

1. åŸºç¡€æ—¥å¿— - Info, Warn, Error åŸºæœ¬ç”¨æ³•
2. å­—æ®µæ—¥å¿— - WithField å’Œé“¾å¼è°ƒç”¨
3. Context æ—¥å¿— - å®Œæ•´çš„ä¸Šä¸‹æ–‡æ—¥å¿—ç¤ºä¾‹
4. é”™è¯¯æ—¥å¿— - é”™è¯¯å¤„ç†æœ€ä½³å®žè·µ
5. å‘½åæ—¥å¿—å™¨ - ä¸åŒç»„ä»¶çš„æ—¥å¿—éš”ç¦»
6. è‡ªå®šä¹‰é…ç½® - æ—¥å¿—çº§åˆ«å’Œè¾“å‡ºé…ç½®
7. å¹¶å‘æ—¥å¿— - å¤š goroutine å¹¶å‘æ—¥å¿—
8. æ—¥å¿—çº§åˆ« - ä¸åŒçº§åˆ«çš„æ•ˆæžœæ¼”ç¤º

```bash
go run demo/basic/main.go
```

**é€‚åˆåœºæ™¯ï¼š** å­¦ä¹ åŸºç¡€ç”¨æ³•ã€ç†è§£æ ¸å¿ƒæ¦‚å¿µ

### 2. demo/webapp/ - Web åº”ç”¨æ¨¡æ‹Ÿ

**æ¨¡æ‹Ÿå®Œæ•´ Web æœåŠ¡å™¨ç”Ÿå‘½å‘¨æœŸï¼š**

- åº”ç”¨å¯åŠ¨å’Œåˆå§‹åŒ–
- æ•°æ®åº“è¿žæŽ¥æ—¥å¿—
- ç¼“å­˜è¿žæŽ¥æ—¥å¿—
- API æœåŠ¡å™¨å¯åŠ¨
- HTTP è¯·æ±‚å¤„ç†ï¼ˆ5ä¸ªä¸åŒè¯·æ±‚ï¼‰
- è¯·æ±‚è¿½è¸ªå’Œç”¨æˆ·è¯†åˆ«
- ä¸šåŠ¡é€»è¾‘æ—¥å¿—
- ä¼˜é›…å…³é—­

æ¯ä¸ªè¯·æ±‚éƒ½æœ‰ç‹¬ç«‹çš„ trace ID å’Œä¸Šä¸‹æ–‡ã€‚

```bash
go run demo/webapp/main.go
```

**è¾“å‡ºæ—¥å¿—åˆ°ï¼š** `demo/webapp/web_app.log`

**é€‚åˆåœºæ™¯ï¼š** äº†è§£å®žé™…é¡¹ç›®é›†æˆã€å­¦ä¹ æœ€ä½³å®žè·µ

### 3. demo/performance/ - æ€§èƒ½å’ŒåŽ‹åŠ›æµ‹è¯•

**åŒ…å« 4 ä¸ªæ€§èƒ½æµ‹è¯•åœºæ™¯ï¼š**

1. **é«˜é¢‘æ—¥å¿—æµ‹è¯•** - 10,000 æ¡è¿žç»­æ—¥å¿—
2. **å¹¶å‘åŽ‹åŠ›æµ‹è¯•** - 100 ä¸ª goroutine å¹¶å‘
3. **å¤§å­—æ®µæ—¥å¿—** - å¤„ç†å¤§æ•°æ®ç»“æž„
4. **ä¸Šä¸‹æ–‡ç´¯ç§¯** - æµ‹è¯•å­—æ®µç´¯ç§¯æ€§èƒ½

```bash
go run demo/performance/main.go
```

**è¾“å‡ºæ—¥å¿—åˆ°ï¼š** `demo/performance/performance.log`

**é€‚åˆåœºæ™¯ï¼š** æ€§èƒ½è¯„ä¼°ã€åŽ‹åŠ›æµ‹è¯•ã€ä¼˜åŒ–å‚è€ƒ

### 4. demo/demo.go - åŽŸå§‹ç®€å•ç¤ºä¾‹

**å¿«é€ŸéªŒè¯ç¤ºä¾‹ï¼š**
- åŸºæœ¬æ—¥å¿—è¾“å‡º
- å­—æ®µæ·»åŠ 
- OTEL é›†æˆ

```bash
go run demo/demo.go
```

**é€‚åˆåœºæ™¯ï¼š** å¿«é€ŸéªŒè¯ã€å…¥é—¨ä½“éªŒ

## ðŸŽ¯ å­¦ä¹ è·¯å¾„

### åˆå­¦è€…è·¯å¾„
```bash
1. go run demo/demo.go              # å¿«é€Ÿä½“éªŒ
2. go run demo/basic/main.go        # å­¦ä¹ æ ¸å¿ƒåŠŸèƒ½
3. é˜…è¯»ä»£ç æ³¨é‡Š                       # ç†è§£å®žçŽ°
```

### è¿›é˜¶è·¯å¾„
```bash
1. go run demo/basic/main.go        # å¤ä¹ åŸºç¡€
2. go run demo/webapp/main.go       # å­¦ä¹ æœ€ä½³å®žè·µ
3. ä¿®æ”¹ä»£ç å®žéªŒ                       # åŠ¨æ‰‹å®žè·µ
```

### é«˜çº§è·¯å¾„
```bash
1. go run demo/performance/main.go  # äº†è§£æ€§èƒ½ç‰¹æ€§
2. æŸ¥çœ‹æ€§èƒ½æŠ¥å‘Š                       # åˆ†æžç»“æžœ
3. ç¼–å†™è‡ªå·±çš„ benchmark              # æ·±å…¥ä¼˜åŒ–
```

## ðŸ“Š è¾“å‡ºç¤ºä¾‹

### Console æ ¼å¼
```
[2025-11-03 14:52:45.741] [info] [] demo/basic/main.go:46 []  Simple info message
[2025-11-03 14:52:45.743] [info] [database] demo/basic/main.go:149 []  Connection pool initialized {"pool_size": 10}
```

### æ–‡ä»¶è¾“å‡º
ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ï¼š
- `demo/basic/demo.log` - åŸºç¡€æ¼”ç¤ºæ—¥å¿—
- `demo/webapp/web_app.log` - Web åº”ç”¨æ—¥å¿—
- `demo/performance/performance.log` - æ€§èƒ½æµ‹è¯•æ—¥å¿—

## ðŸ”§ è‡ªå®šä¹‰ Demo

### åˆ›å»ºæ–°çš„ Demo

```bash
# 1. åˆ›å»ºæ–°ç›®å½•
mkdir demo/myapp

# 2. åˆ›å»º main.go
cat > demo/myapp/main.go << 'EOF'
package main

import (
    "github.com/gw123/glog"
    "github.com/gw123/glog/common"
)

func main() {
    glog.SetDefaultLoggerConfig(
        common.Options{},
        common.WithLevel(common.DebugLevel),
    )
    
    glog.Info("Hello from my demo!")
}
EOF

# 3. è¿è¡Œ
go run demo/myapp/main.go
```

## ðŸ§¹ æ¸…ç†

```bash
# æ¸…ç†æ‰€æœ‰æ—¥å¿—æ–‡ä»¶
find demo -name "*.log" -delete

# æ¸…ç†æž„å»ºçš„äºŒè¿›åˆ¶æ–‡ä»¶
rm -f bin/*-demo

# æˆ–ä½¿ç”¨ make
make clean
```

## ðŸ“ˆ æ€§èƒ½å‚è€ƒ

åŸºäºŽ `demo/performance/` çš„ç»“æžœï¼š

| æµ‹è¯•é¡¹ | æ•°é‡ | æ€§èƒ½ |
|-------|------|------|
| é«˜é¢‘æ—¥å¿— | 10,000 | ~50,000 msg/s |
| å¹¶å‘æ—¥å¿— | 10,000 (100x100) | ~40,000 msg/s |
| å¤§å­—æ®µæ—¥å¿— | 1 | <5ms |
| å­—æ®µç´¯ç§¯ | 100 fields | <1ms |

## ðŸ’¡ æç¤º

1. **ç‹¬ç«‹ç›®å½•**ï¼šæ¯ä¸ª demo éƒ½åœ¨ç‹¬ç«‹ç›®å½•ä¸­ï¼Œé¿å… main å‡½æ•°å†²çª
2. **å¹¶å‘å®‰å…¨**ï¼šæ‰€æœ‰ demo éƒ½å±•ç¤ºäº†çº¿ç¨‹å®‰å…¨çš„ç”¨æ³•
3. **æ—¥å¿—è¾“å‡º**ï¼šæ—¥å¿—ä¼šåŒæ—¶è¾“å‡ºåˆ° console å’Œå„è‡ªç›®å½•çš„æ–‡ä»¶ä¸­
4. **å®žæ—¶æŸ¥çœ‹**ï¼šå¯ä»¥ä½¿ç”¨ `tail -f demo/*/*.log` å®žæ—¶æŸ¥çœ‹æ—¥å¿—

## ðŸ› æ•…éšœæŽ’é™¤

### Demo æ— æ³•è¿è¡Œ
```bash
# ç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•
cd /path/to/glog

# ç¡®ä¿ä¾èµ–å·²ä¸‹è½½
go mod tidy
go mod download

# å°è¯•ç›´æŽ¥è¿è¡Œ
go run demo/basic/main.go
```

### æƒé™é”™è¯¯
```bash
# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x demo/run_demos.sh
```

### æ—¥å¿—æ–‡ä»¶å†™å…¥å¤±è´¥
```bash
# ç¡®ä¿ç›®å½•å­˜åœ¨ä¸”å¯å†™
mkdir -p demo/basic demo/webapp demo/performance
chmod 755 demo/*/
```

## ðŸ“– ç›¸å…³æ–‡æ¡£

- [DEMO_GUIDE.md](DEMO_GUIDE.md) - å®Œæ•´è¯¦ç»†æ–‡æ¡£
- [SUMMARY.md](SUMMARY.md) - Demo æ€»ç»“
- [../README.md](../README.md) - é¡¹ç›®ä¸»æ–‡æ¡£
- [../MAKEFILE_GUIDE.md](../MAKEFILE_GUIDE.md) - Makefile ä½¿ç”¨æŒ‡å—

## ðŸ¤ è´¡çŒ®

æ¬¢è¿Žè´¡çŒ®æ–°çš„ demo ç¤ºä¾‹ï¼åˆ›å»ºæ–° demo æ—¶ï¼š

1. åœ¨ `demo/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. æ·»åŠ  `main.go` æ–‡ä»¶
3. æ›´æ–°æœ¬ README
4. æ›´æ–° `run_demos.sh` è„šæœ¬
5. æäº¤ PR
